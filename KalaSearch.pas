{$A8,B-,C+,D+,E-,F-,G+,H+,I+,J+,K-,L+,M-,N+,O+,P+,Q-,R-,S-,T-,U-,V+,W-,X+,Y+,Z1}
{$MINSTACKSIZE $00004000}
{$MAXSTACKSIZE $00100000}
{$IMAGEBASE $00400000}
{$APPTYPE GUI}
{$WARN SYMBOL_DEPRECATED ON}
{$WARN SYMBOL_LIBRARY ON}
{$WARN SYMBOL_PLATFORM ON}
{$WARN UNIT_LIBRARY ON}
{$WARN UNIT_PLATFORM ON}
{$WARN UNIT_DEPRECATED ON}
{$WARN HRESULT_COMPAT ON}
{$WARN HIDING_MEMBER ON}
{$WARN HIDDEN_VIRTUAL ON}
{$WARN GARBAGE ON}
{$WARN BOUNDS_ERROR ON}
{$WARN ZERO_NIL_COMPAT ON}
{$WARN STRING_CONST_TRUNCED ON}
{$WARN FOR_LOOP_VAR_VARPAR ON}
{$WARN TYPED_CONST_VARPAR ON}
{$WARN ASG_TO_TYPED_CONST ON}
{$WARN CASE_LABEL_RANGE ON}
{$WARN FOR_VARIABLE ON}
{$WARN CONSTRUCTING_ABSTRACT ON}
{$WARN COMPARISON_FALSE ON}
{$WARN COMPARISON_TRUE ON}
{$WARN COMPARING_SIGNED_UNSIGNED ON}
{$WARN COMBINING_SIGNED_UNSIGNED ON}
{$WARN UNSUPPORTED_CONSTRUCT ON}
{$WARN FILE_OPEN ON}
{$WARN FILE_OPEN_UNITSRC ON}
{$WARN BAD_GLOBAL_SYMBOL ON}
{$WARN DUPLICATE_CTOR_DTOR ON}
{$WARN INVALID_DIRECTIVE ON}
{$WARN PACKAGE_NO_LINK ON}
{$WARN PACKAGED_THREADVAR ON}
{$WARN IMPLICIT_IMPORT ON}
{$WARN HPPEMIT_IGNORED ON}
{$WARN NO_RETVAL ON}
{$WARN USE_BEFORE_DEF ON}
{$WARN FOR_LOOP_VAR_UNDEF ON}
{$WARN UNIT_NAME_MISMATCH ON}
{$WARN NO_CFG_FILE_FOUND ON}
{$WARN MESSAGE_DIRECTIVE ON}
{$WARN IMPLICIT_VARIANTS ON}
{$WARN UNICODE_TO_LOCALE ON}
{$WARN LOCALE_TO_UNICODE ON}
{$WARN IMAGEBASE_MULTIPLE ON}
{$WARN SUSPICIOUS_TYPECAST ON}
{$WARN PRIVATE_PROPACCESSOR ON}
{$WARN UNSAFE_TYPE ON}
{$WARN UNSAFE_CODE ON}
{$WARN UNSAFE_CAST ON}
{$A8,B-,C+,D+,E-,F-,G+,H+,I+,J+,K-,L+,M-,N+,O+,P+,Q-,R-,S-,T-,U-,V+,W-,X+,Y+,Z1}
{$MINSTACKSIZE $00004000}
{$MAXSTACKSIZE $00100000}
{$IMAGEBASE $00400000}
{$APPTYPE GUI}
{$WARN SYMBOL_DEPRECATED ON}
{$WARN SYMBOL_LIBRARY ON}
{$WARN SYMBOL_PLATFORM ON}
{$WARN UNIT_LIBRARY ON}
{$WARN UNIT_PLATFORM ON}
{$WARN UNIT_DEPRECATED ON}
{$WARN HRESULT_COMPAT ON}
{$WARN HIDING_MEMBER ON}
{$WARN HIDDEN_VIRTUAL ON}
{$WARN GARBAGE ON}
{$WARN BOUNDS_ERROR ON}
{$WARN ZERO_NIL_COMPAT ON}
{$WARN STRING_CONST_TRUNCED ON}
{$WARN FOR_LOOP_VAR_VARPAR ON}
{$WARN TYPED_CONST_VARPAR ON}
{$WARN ASG_TO_TYPED_CONST ON}
{$WARN CASE_LABEL_RANGE ON}
{$WARN FOR_VARIABLE ON}
{$WARN CONSTRUCTING_ABSTRACT ON}
{$WARN COMPARISON_FALSE ON}
{$WARN COMPARISON_TRUE ON}
{$WARN COMPARING_SIGNED_UNSIGNED ON}
{$WARN COMBINING_SIGNED_UNSIGNED ON}
{$WARN UNSUPPORTED_CONSTRUCT ON}
{$WARN FILE_OPEN ON}
{$WARN FILE_OPEN_UNITSRC ON}
{$WARN BAD_GLOBAL_SYMBOL ON}
{$WARN DUPLICATE_CTOR_DTOR ON}
{$WARN INVALID_DIRECTIVE ON}
{$WARN PACKAGE_NO_LINK ON}
{$WARN PACKAGED_THREADVAR ON}
{$WARN IMPLICIT_IMPORT ON}
{$WARN HPPEMIT_IGNORED ON}
{$WARN NO_RETVAL ON}
{$WARN USE_BEFORE_DEF ON}
{$WARN FOR_LOOP_VAR_UNDEF ON}
{$WARN UNIT_NAME_MISMATCH ON}
{$WARN NO_CFG_FILE_FOUND ON}
{$WARN MESSAGE_DIRECTIVE ON}
{$WARN IMPLICIT_VARIANTS ON}
{$WARN UNICODE_TO_LOCALE ON}
{$WARN LOCALE_TO_UNICODE ON}
{$WARN IMAGEBASE_MULTIPLE ON}
{$WARN SUSPICIOUS_TYPECAST ON}
{$WARN PRIVATE_PROPACCESSOR ON}
{$WARN UNSAFE_TYPE ON}
{$WARN UNSAFE_CODE ON}
{$WARN UNSAFE_CAST ON}
{$A8,B-,C+,D+,E-,F-,G+,H+,I+,J+,K-,L+,M-,N+,O+,P+,Q-,R-,S-,T-,U-,V+,W-,X+,Y+,Z1}
{$MINSTACKSIZE $00004000}
{$MAXSTACKSIZE $00100000}
{$IMAGEBASE $00400000}
{$APPTYPE GUI}
{$WARN SYMBOL_DEPRECATED ON}
{$WARN SYMBOL_LIBRARY ON}
{$WARN SYMBOL_PLATFORM ON}
{$WARN UNIT_LIBRARY ON}
{$WARN UNIT_PLATFORM ON}
{$WARN UNIT_DEPRECATED ON}
{$WARN HRESULT_COMPAT ON}
{$WARN HIDING_MEMBER ON}
{$WARN HIDDEN_VIRTUAL ON}
{$WARN GARBAGE ON}
{$WARN BOUNDS_ERROR ON}
{$WARN ZERO_NIL_COMPAT ON}
{$WARN STRING_CONST_TRUNCED ON}
{$WARN FOR_LOOP_VAR_VARPAR ON}
{$WARN TYPED_CONST_VARPAR ON}
{$WARN ASG_TO_TYPED_CONST ON}
{$WARN CASE_LABEL_RANGE ON}
{$WARN FOR_VARIABLE ON}
{$WARN CONSTRUCTING_ABSTRACT ON}
{$WARN COMPARISON_FALSE ON}
{$WARN COMPARISON_TRUE ON}
{$WARN COMPARING_SIGNED_UNSIGNED ON}
{$WARN COMBINING_SIGNED_UNSIGNED ON}
{$WARN UNSUPPORTED_CONSTRUCT ON}
{$WARN FILE_OPEN ON}
{$WARN FILE_OPEN_UNITSRC ON}
{$WARN BAD_GLOBAL_SYMBOL ON}
{$WARN DUPLICATE_CTOR_DTOR ON}
{$WARN INVALID_DIRECTIVE ON}
{$WARN PACKAGE_NO_LINK ON}
{$WARN PACKAGED_THREADVAR ON}
{$WARN IMPLICIT_IMPORT ON}
{$WARN HPPEMIT_IGNORED ON}
{$WARN NO_RETVAL ON}
{$WARN USE_BEFORE_DEF ON}
{$WARN FOR_LOOP_VAR_UNDEF ON}
{$WARN UNIT_NAME_MISMATCH ON}
{$WARN NO_CFG_FILE_FOUND ON}
{$WARN MESSAGE_DIRECTIVE ON}
{$WARN IMPLICIT_VARIANTS ON}
{$WARN UNICODE_TO_LOCALE ON}
{$WARN LOCALE_TO_UNICODE ON}
{$WARN IMAGEBASE_MULTIPLE ON}
{$WARN SUSPICIOUS_TYPECAST ON}
{$WARN PRIVATE_PROPACCESSOR ON}
{$WARN UNSAFE_TYPE ON}
{$WARN UNSAFE_CODE ON}
{$WARN UNSAFE_CAST ON}
{$A8,B-,C+,D+,E-,F-,G+,H+,I+,J+,K-,L+,M-,N+,O+,P+,Q-,R-,S-,T-,U-,V+,W-,X+,Y+,Z1}
{$MINSTACKSIZE $00004000}
{$MAXSTACKSIZE $00100000}
{$IMAGEBASE $00400000}
{$APPTYPE GUI}
{$WARN SYMBOL_DEPRECATED ON}
{$WARN SYMBOL_LIBRARY ON}
{$WARN SYMBOL_PLATFORM ON}
{$WARN UNIT_LIBRARY ON}
{$WARN UNIT_PLATFORM ON}
{$WARN UNIT_DEPRECATED ON}
{$WARN HRESULT_COMPAT ON}
{$WARN HIDING_MEMBER ON}
{$WARN HIDDEN_VIRTUAL ON}
{$WARN GARBAGE ON}
{$WARN BOUNDS_ERROR ON}
{$WARN ZERO_NIL_COMPAT ON}
{$WARN STRING_CONST_TRUNCED ON}
{$WARN FOR_LOOP_VAR_VARPAR ON}
{$WARN TYPED_CONST_VARPAR ON}
{$WARN ASG_TO_TYPED_CONST ON}
{$WARN CASE_LABEL_RANGE ON}
{$WARN FOR_VARIABLE ON}
{$WARN CONSTRUCTING_ABSTRACT ON}
{$WARN COMPARISON_FALSE ON}
{$WARN COMPARISON_TRUE ON}
{$WARN COMPARING_SIGNED_UNSIGNED ON}
{$WARN COMBINING_SIGNED_UNSIGNED ON}
{$WARN UNSUPPORTED_CONSTRUCT ON}
{$WARN FILE_OPEN ON}
{$WARN FILE_OPEN_UNITSRC ON}
{$WARN BAD_GLOBAL_SYMBOL ON}
{$WARN DUPLICATE_CTOR_DTOR ON}
{$WARN INVALID_DIRECTIVE ON}
{$WARN PACKAGE_NO_LINK ON}
{$WARN PACKAGED_THREADVAR ON}
{$WARN IMPLICIT_IMPORT ON}
{$WARN HPPEMIT_IGNORED ON}
{$WARN NO_RETVAL ON}
{$WARN USE_BEFORE_DEF ON}
{$WARN FOR_LOOP_VAR_UNDEF ON}
{$WARN UNIT_NAME_MISMATCH ON}
{$WARN NO_CFG_FILE_FOUND ON}
{$WARN MESSAGE_DIRECTIVE ON}
{$WARN IMPLICIT_VARIANTS ON}
{$WARN UNICODE_TO_LOCALE ON}
{$WARN LOCALE_TO_UNICODE ON}
{$WARN IMAGEBASE_MULTIPLE ON}
{$WARN SUSPICIOUS_TYPECAST ON}
{$WARN PRIVATE_PROPACCESSOR ON}
{$WARN UNSAFE_TYPE ON}
{$WARN UNSAFE_CODE ON}
{$WARN UNSAFE_CAST ON}
{$A8,B-,C+,D+,E-,F-,G+,H+,I+,J+,K-,L+,M-,N+,O+,P+,Q-,R-,S-,T-,U-,V+,W-,X+,Y+,Z1}
{$MINSTACKSIZE $00004000}
{$MAXSTACKSIZE $00100000}
{$IMAGEBASE $00400000}
{$APPTYPE GUI}
{$WARN SYMBOL_DEPRECATED ON}
{$WARN SYMBOL_LIBRARY ON}
{$WARN SYMBOL_PLATFORM ON}
{$WARN UNIT_LIBRARY ON}
{$WARN UNIT_PLATFORM ON}
{$WARN UNIT_DEPRECATED ON}
{$WARN HRESULT_COMPAT ON}
{$WARN HIDING_MEMBER ON}
{$WARN HIDDEN_VIRTUAL ON}
{$WARN GARBAGE ON}
{$WARN BOUNDS_ERROR ON}
{$WARN ZERO_NIL_COMPAT ON}
{$WARN STRING_CONST_TRUNCED ON}
{$WARN FOR_LOOP_VAR_VARPAR ON}
{$WARN TYPED_CONST_VARPAR ON}
{$WARN ASG_TO_TYPED_CONST ON}
{$WARN CASE_LABEL_RANGE ON}
{$WARN FOR_VARIABLE ON}
{$WARN CONSTRUCTING_ABSTRACT ON}
{$WARN COMPARISON_FALSE ON}
{$WARN COMPARISON_TRUE ON}
{$WARN COMPARING_SIGNED_UNSIGNED ON}
{$WARN COMBINING_SIGNED_UNSIGNED ON}
{$WARN UNSUPPORTED_CONSTRUCT ON}
{$WARN FILE_OPEN ON}
{$WARN FILE_OPEN_UNITSRC ON}
{$WARN BAD_GLOBAL_SYMBOL ON}
{$WARN DUPLICATE_CTOR_DTOR ON}
{$WARN INVALID_DIRECTIVE ON}
{$WARN PACKAGE_NO_LINK ON}
{$WARN PACKAGED_THREADVAR ON}
{$WARN IMPLICIT_IMPORT ON}
{$WARN HPPEMIT_IGNORED ON}
{$WARN NO_RETVAL ON}
{$WARN USE_BEFORE_DEF ON}
{$WARN FOR_LOOP_VAR_UNDEF ON}
{$WARN UNIT_NAME_MISMATCH ON}
{$WARN NO_CFG_FILE_FOUND ON}
{$WARN MESSAGE_DIRECTIVE ON}
{$WARN IMPLICIT_VARIANTS ON}
{$WARN UNICODE_TO_LOCALE ON}
{$WARN LOCALE_TO_UNICODE ON}
{$WARN IMAGEBASE_MULTIPLE ON}
{$WARN SUSPICIOUS_TYPECAST ON}
{$WARN PRIVATE_PROPACCESSOR ON}
{$WARN UNSAFE_TYPE ON}
{$WARN UNSAFE_CODE ON}
{$WARN UNSAFE_CAST ON}
unit KalaSearch;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  Db, DBTables, StdCtrls, ExtCtrls, DBCtrls, Grids, DBGrids, Buttons,
  ActnList;

type
  TfrmKalaSearch = class(TForm)
    Bevel1: TBevel;
    DBGrid1: TDBGrid;
    ActionList1: TActionList;
    Action1: TAction;
    Panel1: TPanel;
    RadioButton1: TRadioButton;
    RadioButton2: TRadioButton;
    Edit1: TEdit;
    Edit2: TEdit;
    Label1: TLabel;
    BitBtn2: TBitBtn;
    BitBtn5: TBitBtn;
    Label2: TLabel;
    Panel2: TPanel;
    BitBtn4: TBitBtn;
    BitBtn3: TBitBtn;
    Action3: TAction;
    Action4: TAction;
    Action5: TAction;
    BitBtn1: TBitBtn;
    BitBtn7: TBitBtn;
    BitBtn8: TBitBtn;
    Action2: TAction;
    Action6: TAction;
    procedure BitBtn2Click(Sender: TObject);
    procedure BitBtn3Click(Sender: TObject);
    procedure RadioButton2Click(Sender: TObject);
    procedure RadioButton1Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure BitBtn5Click(Sender: TObject);
    procedure BitBtn4Click(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure BitBtn1KeyPress(Sender: TObject; var Key: Char);
    procedure Edit2Change(Sender: TObject);
    procedure Edit1Change(Sender: TObject);
    procedure DBGrid1DblClick(Sender: TObject);
    procedure BitBtn1Click(Sender: TObject);
    procedure BitBtn8Click(Sender: TObject);
    procedure BitBtn7Click(Sender: TObject);
    procedure Edit1KeyPress(Sender: TObject; var Key: Char);
    procedure Edit1Enter(Sender: TObject);
    procedure Edit1Exit(Sender: TObject);
    procedure Edit2Enter(Sender: TObject);
    procedure DBGrid1DrawColumnCell(Sender: TObject; const Rect: TRect;
      DataCol: Integer; Column: TColumn; State: TGridDrawState);
  private
    { Private declarations }
  public
       { Public declarations }
  end;

var
  frmKalaSearch: TfrmKalaSearch;

implementation

uses KalaSabt, KalaForosh, Unit9, Unit18, Unit22;


{$R *.DFM}

procedure TfrmKalaSearch.BitBtn2Click(Sender: TObject);
begin
close;
end;

procedure TfrmKalaSearch.BitBtn3Click(Sender: TObject);
var
check:byte;
begin
if frmKalaSabt.table1.IsEmpty then
      begin
      showmessage('ÂÌç ò«·«ÌÌ ÊÃÊœ ‰œ«—œ');
      exit;
      end;
frmKalaSabt.txtKCode.Text:=form18.CodeTrimZero(frmKalaSabt.table1.fieldbyname('KCode').AsString);
frmKalaSabt.txtSharh.text:=frmKalaSabt.table1.fieldbyname('Sharh').AsString;
frmKalaSabt.txtGheimat.Text:=frmKalaSabt.table1.fieldbyname('gheimat').AsString;
if frmKalaSabt.table1.fieldbyname('Tedad').AsInteger=-1 then
    frmKalaSabt.CBKind.ItemIndex:=1
  else
    begin
    frmKalaSabt.CBKind.ItemIndex:=0;    
    frmKalaSabt.txtTedad.Text:=frmKalaSabt.table1.fieldbyname('Tedad').AsString;
    end;
frmKalaSabt.CBKindChange(Nil);
frmKalaSabt.bitbtn1.Visible:=false;
frmKalaSabt.bitbtn3.Visible:=true;
label1.caption:=frmKalaSabt.table1.fieldbyname('KCode').AsString;
frmKalaSabt.showmodal;
//frmKalaSabt.table1.IndexFieldNames:='';
frmKalaSabt.table1.open;
frmKalaSabt.table1.IndexFieldNames:='KCode';
frmKalaSabt.Table1.Locate('KCode',label1.caption,[loPartialKey]);
label1.caption:='';
end;

procedure TfrmKalaSearch.RadioButton2Click(Sender: TObject);
begin
frmKalaSabt.table1.IndexFieldNames:='Sharh';
edit2.SetFocus;
edit2.SelectAll;
RadioButton2.Checked:=true;
end;

procedure TfrmKalaSearch.RadioButton1Click(Sender: TObject);
begin
frmKalaSabt.table1.IndexFieldNames:='KCode';
edit1.SetFocus;
edit1.SelectAll;
RadioButton1.Checked:=true;
end;

procedure TfrmKalaSearch.FormShow(Sender: TObject);
begin
Edit1.Text:='';
Edit2.Text:='';
frmKalaSabt.table1.Close;
frmKalaSabt.table1.open;
frmKalaSabt.DataSource1.DataSet:=frmKalaSabt.Table1;
frmKalaSabt.DataSource1.Enabled:=true;
dbgrid1.DataSource:=frmKalaSabt.DataSource1;
dbgrid1.Refresh;
//if Radiobutton1.Checked then Edit1.SetFocus else Edit2.SetFocus;
if Edit1.Enabled then Edit1.SetFocus;

end;

procedure TfrmKalaSearch.BitBtn5Click(Sender: TObject);
begin
IF BITBTN5.Visible = FALSE THEN EXIT;
frmKalaForosh.txtKCode.text:=Form18.CodeTrimZero(frmKalaSabt.table1.fieldbyname('KCode').asstring);
frmKalaForosh.OnvanCap.Caption:=frmKalaSabt.table1.fieldbyname('Sharh').asstring;
frmKalaForosh.Gheimat:=frmKalaSabt.table1.fieldbyname('Gheimat').AsInteger;
//form22.Edit1.Text:=form18.CodeTrimZero(frmKalaSabt.table1.fieldbyname('kcode').asstring);
//form22.FamilyCap.Caption:=frmKalaSabt.table1.fieldbyname('sharh').asstring;
close;
end;

procedure TfrmKalaSearch.BitBtn4Click(Sender: TObject);
begin
if frmKalaSabt.table1.IsEmpty then
      begin
      showmessage('ÂÌç ò«·«ÌÌ ÊÃÊœ ‰œ«—œ');
      exit;
      end;
if messagedlg('«Ì« «“ «Ì‰ ﬂ«— «ÿ„Ì‰«‰ œ«—Ìœ',mtconfirmation,[mbyes,mbno],0)=mryes then
         begin
          Form18.QueryCDBank.Active:=false;
          Form18.QueryCDBank.SQL.Clear;
          Form18.QueryCDBank.SQL.Text:='Update Payment Set MembCode='+QuotedStr('Õ–› ‘œÂ')+' where RegCode='+QuotedStr('›—Ê‘ ò«·«/Œœ„« ')+' and MembCode='+QuotedStr(frmKalaSabt.table1.fieldByName('KCode').AsString);
          Form18.QueryCDBank.ExecSQL;
          frmKalaSabt.table1.Delete;
         end;
end;

procedure TfrmKalaSearch.FormClose(Sender: TObject; var Action: TCloseAction);
begin
RadioButton2.SetFocus;
label1.caption:='-200';
frmKalaSabt.txtSharh.Text:='';
frmKalaSabt.txtKCode.Text:='';
frmKalaSabt.txtTedad.Text:='0';
frmKalaSabt.txtGheimat.Text:='0';
end;

procedure TfrmKalaSearch.BitBtn1KeyPress(Sender: TObject; var Key: Char);
begin
if key=#13 then if radiobutton1.Checked then Edit1.SetFocus else Edit2.SetFocus;
end;

procedure TfrmKalaSearch.Edit2Change(Sender: TObject);
begin
frmKalaSabt.Table1.Locate('sharh',Edit2.Text,[loPartialKey]);
end;

procedure TfrmKalaSearch.Edit1Change(Sender: TObject);
begin
frmKalaSabt.Table1.Locate('KCode',Form9.ConvetCode(Edit1.Text,Edit1.MaxLength),[loPartialKey]);
end;

procedure TfrmKalaSearch.DBGrid1DblClick(Sender: TObject);
begin
if BitBtn5.Visible then
  BitBtn5Click(Nil)
  else
  BitBtn3Click(Nil);
end;

procedure TfrmKalaSearch.BitBtn1Click(Sender: TObject);
begin
frmKalaSabt.bitbtn1.Visible:=true;
frmKalaSabt.bitbtn3.Visible:=false;
frmKalaSabt.showmodal;
frmKalaSabt.Table1.Open;
end;

procedure TfrmKalaSearch.BitBtn8Click(Sender: TObject);
var
S:String;
i:integer;
begin
if frmKalaSabt.table1.IsEmpty then
      begin
      showmessage('ÂÌç ò«·«ÌÌ ÊÃÊœ ‰œ«—œ');
      exit;
      end;
if frmKalaSabt.table1.FieldByName('tedad').AsInteger<0 then
  begin
  showmessage('Œœ„«  „ÊÃÊœÌ ‰œ«—œ');
  exit;
  end;
If Not InputQuery('ﬂ„ ﬂ—œ‰ «“ „ÊÃÊœÌ',' ⁄œ«œ „Ê—œ ‰Ÿ— «‰ —« Ê«—œ ﬂ‰Ìœ',S) then exit;
if (length(trim(S))=0)or(StrtoInt(trim(S))=0) then exit;
For i:= 1 to Length(s) do
        begin
        if Not (S[i] in ['0','1','2','3','4','5','6','7','8','9']) then
                begin
                MessageDlg('⁄œœ Ê«—œ ‘œÂ „⁄ »— ‰Ì” . ⁄„·Ì«  «‰Ã«„ ‰‘œ',mtError,[mbOk],0);
                exit;
                end;
        end;
if frmKalaSabt.table1.FieldByName('tedad').AsInteger-StrtoInt(S)<0 then
  begin
  messagedlg('»« «Ì‰ ò«— „ÊÃÊœÌ „‰›Ì „Ì ‘Êœ. ⁄„·Ì«  «‰Ã«„ ‰‘œ',mterror,[mbOk],0);
  exit;
  end;
frmKalaSabt.table1.edit;
frmKalaSabt.table1.FieldByName('tedad').AsInteger:=frmKalaSabt.table1.FieldByName('tedad').AsInteger-StrtoInt(S);
frmKalaSabt.table1.post;
end;

procedure TfrmKalaSearch.BitBtn7Click(Sender: TObject);
var
S:String;
i:integer;
begin
if frmKalaSabt.table1.IsEmpty then
      begin
      showmessage('ÂÌç ò«·«ÌÌ ÊÃÊœ ‰œ«—œ');
      exit;
      end;
if frmKalaSabt.table1.FieldByName('tedad').AsInteger<0 then
  begin
  showmessage('Œœ„«  „ÊÃÊœÌ ‰œ«—œ');
  exit;
  end;
If Not InputQuery('«÷«›Â ﬂ—œ‰ „ÊÃÊœÌ',' ⁄œ«œ „Ê—œ ‰Ÿ— «‰ —« Ê«—œ ﬂ‰Ìœ',S) then exit;
if (length(trim(S))=0)or(StrtoInt(trim(S))=0) then exit;
For i:= 1 to Length(s) do
        begin
        if Not (S[i] in ['0','1','2','3','4','5','6','7','8','9']) then
                begin
                MessageDlg('⁄œœ Ê«—œ ‘œÂ „⁄ »— ‰Ì” . ⁄„·Ì«  «‰Ã«„ ‰‘œ',mtError,[mbOk],0);
                exit;
                end;
        end;
frmKalaSabt.table1.edit;
frmKalaSabt.table1.FieldByName('tedad').AsInteger:=frmKalaSabt.table1.FieldByName('tedad').AsInteger+StrtoInt(S);
frmKalaSabt.table1.post;

end;

procedure TfrmKalaSearch.Edit1KeyPress(Sender: TObject; var Key: Char);
var
FarStr,EngStr:string;
i:byte;
begin
FarStr:='çÃÕŒÂ⁄€›ﬁÀ’÷ò„‰ «·»Ì”‘/.Ê∆œ–—“ÿŸ';
EngStr:='][POIUYTREWQ;LKJHGFDSA/.,MNBVCXZ';
for i:=1 to length(FarStr) do
  if key=FarStr[i] then key:=EngStr[i];
key:=UpCase(Key);  
end;

procedure TfrmKalaSearch.Edit1Enter(Sender: TObject);
begin
ActivateKeyboardLayout($00000409,KLF_REORDER);
edit2.Text:='';
RadioButton1Click(nil);
end;

procedure TfrmKalaSearch.Edit1Exit(Sender: TObject);
begin
ActivateKeyboardLayout($00000429,KLF_REORDER);
end;

procedure TfrmKalaSearch.Edit2Enter(Sender: TObject);
begin
edit1.Text:='';
RadioButton2Click(nil);
end;

procedure TfrmKalaSearch.DBGrid1DrawColumnCell(Sender: TObject;
  const Rect: TRect; DataCol: Integer; Column: TColumn;
  State: TGridDrawState);
begin
  if DBGrid1.DataSource.DataSet.RecNo > 0 then
  begin
  if (frmKalaSabt.table1.FieldByName('tedad').AsInteger=0) then
       DBGrid1.Canvas.Brush.Color:=RGB(255,200,200);
  if (frmKalaSabt.table1.FieldByName('tedad').AsInteger=-1) then
       DBGrid1.Canvas.Brush.Color:=RGB(200,255,200);
  DBGrid1.DefaultDrawColumnCell(Rect, DataCol, Column, State);
    if Column.Title.Caption = 'òœ ò«·«/Œœ„« ' then
      DBGrid1.Canvas.TextOut(Rect.Left + 2, Rect.Top, form18.CodeTrimZero(DBGrid1.DataSource.DataSet.fieldbyname('KCode').AsString));
  end;

end;

end.
